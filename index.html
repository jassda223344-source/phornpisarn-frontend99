<div id="bill" class="page">
  <h2 class="text-xl font-bold mb-4">ğŸ“„ à¹ƒà¸šà¸§à¸²à¸‡à¸šà¸´à¸¥</h2>

  <!-- FORM -->
  <div class="bg-white p-4 rounded-xl shadow mb-4 max-w-md">
    <input id="company" placeholder="à¸Šà¸·à¹ˆà¸­à¸šà¸£à¸´à¸©à¸±à¸—"
      class="w-full border p-2 mb-2 rounded">

    <input id="amount" type="number" placeholder="à¸¢à¸­à¸”à¹€à¸‡à¸´à¸™"
      class="w-full border p-2 mb-2 rounded">

    <input id="datetime" type="datetime-local"
      class="w-full border p-2 mb-2 rounded">

    <input id="image" type="file" accept="image/*"
      class="w-full border p-2 mb-2 rounded">

    <button onclick="saveBill()"
      class="w-full bg-indigo-600 text-white py-2 rounded">
      â• à¸šà¸±à¸™à¸—à¸¶à¸à¹ƒà¸šà¸§à¸²à¸‡à¸šà¸´à¸¥
    </button>
  </div>

  <!-- LIST -->
  <div id="billList"></div>
</div>
function saveBill(){
  const fd = new FormData();
  fd.append('company', company.value);
  fd.append('amount', amount.value);
  fd.append('datetime', datetime.value);
  fd.append('recorder', 'JOY2');
  fd.append('image', image.files[0]);

  fetch(BACKEND_URL + '/bill',{
    method:'POST',
    headers:{
      Authorization: localStorage.getItem('token')
    },
    body: fd
  })
  .then(()=>loadBills());
}

function loadBills(){
  fetch(BACKEND_URL + '/bill',{
    headers:{
      Authorization: localStorage.getItem('token')
    }
  })
  .then(r=>r.json())
  .then(data=>{
    billList.innerHTML = data.map(b=>`
      <div class="bg-white p-3 rounded shadow mb-2">
        <div class="font-bold">${b.company}</div>
        <div>ğŸ’° ${b.amount}</div>
        <div>ğŸ•’ ${b.datetime}</div>
        <div>ğŸ“Œ à¸ªà¸–à¸²à¸™à¸°: ${b.status}</div>
        ${b.image ? `<img src="${BACKEND_URL}/${b.image}" class="w-32 mt-2 rounded">` : ''}
      </div>
    `).join('');
  });
}

loadBills();
